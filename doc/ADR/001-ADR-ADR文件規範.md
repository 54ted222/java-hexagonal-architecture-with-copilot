# 0001-ADR: ADR 文件規範

- 2025/11/02 (Gavin) - 初始版本

## 基本資訊 (Basic Information)

- 狀態 (Status): 已採納 (Accepted)
- 決策日期 (Decision Date): 2025/11/02
- 決策者 (Deciders): 架構師、開發團隊
- 相關決策 (Related Decisions):
  1. 002-ADR
- 背景 (Context):
  1. 程式管理上有需多原因的設計與風格不統一，故需統一管理專案中架構演進脈絡
  1. 現行架構規範主要由團隊成員口耳相傳，故需建立一套 ADR 文件規範以利團隊成員有明確遵循來源
  1. 團隊開發主要使用 AI 工具生成，故建立一套 ADR 文件規範有利於 AI 輔助產出程式碼與文件

## 決策內容 (Decision)

1. 檔案規範:

   - 使用 Markdown 格式撰寫
     - UTF-8 編碼，
     - 勁量避免使用 html 標籤
     - 可以使用 mermaid 語法繪製圖表
   - 標題格式: `{三位流水號}-{英文分類標籤}-{描述}`，例子: `0001-ADR-ADR文件規範`
     1. 三位流水號: 001, 002, 003...
        - 流水號具有唯一性與連續性
     2. 英文分類標籤: 例如 ADR, API, DB, ARCH 等
        - 用以區分不同類型的決策內容
        - 參考 `002-ADR` 術語縮寫清單
     3. 描述: 使用短破折號連接的簡短描述詞
   - 檔案名稱: `{同決策標題}.md`
   - 存放路徑: `{Project Root}/doc/ADR/*.md`
   - ADR 文件中引用的本地資源存放路徑: `{文件路徑}/ADR/*.md`
     - 檔案名稱的`三位流水號`與`英文分類標籤`需與 ADR 文件名稱一致，檔案可以有自己的`描述`，以利於排序管理
     - 例如: `{文件路徑}/ADR/088-API-使用者管理.md`，使用到架構圖片則存放為在`{文件路徑}/ADR/088-API-使用者管理-架構圖.png`
   - 特定專案的專屬 ADR 請獨立存放在 `{文件路徑}/ADR-{Socpe}/*.md`
     - 流水號重新從 001 開始編號，Socpe 為專案名稱縮寫
     - 例如: `{文件路徑}/ADR-CRM/001-ARCH-系統架構.md`
     - 特定專案的專屬 ADR 權重高於通用 ADR 文件

2. 規則

   1. 所有 ADR 文件必須遵循此規範
   2. 文件內容引用到的其他 ADR 文件，使用 `{三位流水號}-{英文分類標籤}` 來進行參考，避免加入描述文字，確保引用的一致性與準確性
   3. 文件內容應保持簡潔明瞭，避免冗長
   4. 原則上**禁止**使用英文縮寫與中文縮寫，除非為專有名詞或業界通用術語
   5. 若有使用縮寫的必要性，應在 `002-ADR` 明確列出縮寫清單與對應說明
   6. 若不同 ADR `決策內容` 內容衝突，則以流水號大的為準

3. 文件內容結構:

   1. 變更紀錄 (Change Log):

      - 固定在文件頂端
      - 必填欄位
      - 格式為 `- YYYY/MM/DD (作者): 變更描述`

   2. 規範性質

      - 必填欄位，不可擴充
      - 格式：
        1. 指導性 (Guideline):
           - 目的: 提供預設選項，協助開發者做出決策，使決策有一個共同一句與方向
           - 由開發者自己根據實際開發情況，自行判斷是否遵守。
        2. 建議性 (Recommendation):
           - 目的: 優化專案品質
           - 違反需具備合理性，且由相關團隊成員共同討論，判斷是否遵守。
        3. 強制性 (Mandatory):
           - 必須遵守的規範
           - 違反必須由主管或架構師審核同意，並於相關程式或文件加上備註說明理由

   3. 狀態 (Status):

      - 必填欄位，不可擴充
      - 格式：
        1. 已採納 (Accepted): 表示該決策已被採用並實施
        2. 已拒絕 (Rejected): 表示該決策未被採用，可能是等待未來重新評估
        3. 已過時 (Superseded): 表示該決策已被更新的決策取代，必需填寫`相關決策`欄位，並在`備註`描述理由

   4. 決策日期 (Decision Date):

      - `決策者`採納該 ADR 決策的日期
      - 必填欄位
      - 格式： YYYY/MM/DD

   5. 相關決策 (Related Decisions)

      - 選填欄位
      - 格式為 `1. [{三位流水號}-{英文分類標籤}](決策文件路徑): {可選-補充說明}` 或 `{三位流水號}-{英文分類標籤}: {可選-補充說明}`

   6. 決策者 (Deciders):

      - 列出主要決策者或決策團隊，例如：架構師、開發團隊
      - 必填欄位

   7. 背景 (Context):

      - 描述決策背景與需求，讓讀者了解為何需要做出此決策，有利於未來回顧與理解
      - 選填欄位

   8. 其他考慮的選項 (Considered Options):

      - 列出所有考慮過的選項，並簡要說明每個選項的優缺點
      - 決策理由 (Rationale): 說明為何選擇此決策，包含優點與風險評估
      - 選填欄位

   9. 決策內容 (Decision):

      - 詳細描述所做的決策內容與範圍
      - 必填欄位

   10. 範例 (Example):

       - 選填欄位
       - 提供一個決策內容描述的範例，供參考

   11. 擴充標題 (Optional Extended Sections):

       - 可根據需要添加其他標題，如「影響範圍 (Impact)」、「實施計劃 (Implementation Plan)」、「回顧與評估 (Review and Evaluation)」等
       - 選填欄位

   12. 備註 (Notes):

       - 補充說明或未來考量事項、參考資料等
       - 選填欄位

4. 文件排版格式:

```markdown
# {決策標題}

- {變更紀錄}

## 基本資訊 (Basic Information)

- 狀態 (Status): {狀態}
- 決策日期 (Decision Date): {決策日期}
- 決策者 (Deciders): {決策者}
- 相關決策 (Related Decisions):
  1. {ARD 文件引用}: {補充說明}
- 背景 (Context):
  1. {背景描述}

## 其他考慮的選項 (Considered Options)

1. {選項一描述}

- 優點: {優點描述}
- 缺點: {缺點描述}

2. {選項二描述}

- 優點: {優點描述}
- 缺點: {缺點描述}

- 決策理由 (Rationale)
  {決策理由描述}

## 決策內容 (Decision)

{決策內容描述}

## 範例 (Example):

{決策內容範例內容描述}

## {擴充標題}

{備註內容描述}

## 備註 (Notes):

{備註內容描述}
```
